"use strict";(self.webpackChunkreact_kabzda_2=self.webpackChunkreact_kabzda_2||[]).push([[786],{2786:(t,s,e)=>{e.r(s),e.d(s,{default:()=>E});var o=e(2791);const r="Profile_content__IU+n2",i="ProfileInfo_description_block__8mNr5",n="ProfileInfo_avatar__m+R+G",a="ProfileInfo_backgroung_profile__eo0Fs",l="ProfileInfo_contact__4szZe",c="ProfileInfo_formErrorDiv__7c2St";var d=e(4922),u=e(5618),p=e(6139),h=e(704),f=e(184);class x extends o.Component{constructor(){super(...arguments),this.state={editMode:!1,status:this.props.status}}activateMode(){this.setState({editMode:!0})}deActivateMode(){this.setState({editMode:!1}),this.props.updateStatusTC(this.state.status)}onChangeStatus(t){let s=t.currentTarget.value;this.setState({status:s})}componentDidUpdate(t,s){t.status!==this.props.status&&this.setState({status:this.props.status})}render(){return(0,f.jsx)("div",{children:this.state.editMode?(0,f.jsx)("input",{autoFocus:!0,onChange:this.onChangeStatus.bind(this),onBlur:this.deActivateMode.bind(this),value:this.state.status,type:"text"}):(0,f.jsx)("span",{onDoubleClick:this.activateMode.bind(this),children:this.props.status?this.props.status:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})})}}(0,h.Z)({form:"statusForm"})((t=>(0,f.jsx)(p.Z,{autoFocus:!0,onBlur:t.deActivateMode,name:"statusInput",component:"input"})));const m=x;var j=e(4420),v=e(8161);(0,j.$j)((t=>({status:t.profilePage.statusText})),{onChangeStatusAC:v.tG})(m);const b=t=>{let[s,e]=(0,o.useState)(!1),[r,i]=(0,o.useState)(t.status);(0,o.useEffect)((()=>{i(t.status)}),[t.status]);return(0,f.jsx)("div",{children:s?(0,f.jsx)("input",{autoFocus:!0,onChange:t=>{i(t.currentTarget.value)},onBlur:()=>{e(!1),t.updateStatusTC(r)},value:r,type:"text"}):(0,f.jsx)("span",{onDoubleClick:()=>{e(!0)},children:t.status?t.status:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})})};var g=e(975);const _=(0,h.Z)({form:"edit-profile"})((t=>{let{handleSubmit:s,isOwner:e,profile:o,error:r}=t;return(0,f.jsxs)("form",{onSubmit:s,children:[e&&(0,f.jsx)("div",{children:(0,f.jsx)("button",{children:"Complete"})}),r&&(0,f.jsx)("div",{className:c,children:r}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Your Name"}),": ",(0,g.ck)("fullName","fullName",g.II,[])]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"About you"}),": ",(0,g.ck)("aboutMe","about you",g.II,[])]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job"}),": ",(0,g.ck)("lookingForAJob","",g.II,[],{type:"checkbox"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"My professional skills"}),":",(0,g.ck)("lookingForAJobDescription","Your professional skills",g.Kx,[])]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts"}),Object.keys(o.contacts).map((t=>(0,f.jsxs)("div",{className:l,children:[(0,f.jsxs)("b",{children:[t,":"]}),(0,g.ck)("contacts."+t,t,g.II)]},t)))]})]})})),C=t=>(0,f.jsxs)("div",{children:[t.isOwner&&(0,f.jsx)("div",{children:(0,f.jsx)("button",{onClick:()=>t.setEditMode(!0),children:"Edit"})}),t.profile.aboutMe?t.profile.aboutMe:"About me",(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job"}),": ",t.profile.lookingForAJob?"YES":"NO"]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"My professional skills"}),": ",t.profile.lookingForAJobDescription?t.profile.lookingForAJobDescription:"dont have"]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts"}),Object.keys(t.profile.contacts).map((s=>(0,f.jsx)(k,{contactTitle:s,contactValue:t.profile.contacts[s]},s)))]})]}),k=t=>t.contactValue?(0,f.jsxs)("div",{className:l,children:[(0,f.jsx)("b",{children:t.contactTitle}),": ",t.contactValue]}):"",S=t=>{const[s,e]=(0,o.useState)(!1),r=async s=>{t.saveProfile(s).then((()=>{e(!1)}))},l=s=>{s.target.files.length&&t.savePhoto(s.target.files[0])};return t.profile?(0,f.jsxs)("div",{children:[(0,f.jsx)("img",{className:a,src:"https://img.freepik.com/free-photo/landscape-of-morning-fog-and-mountains-with-hot-air-balloons-at-sunrise_335224-794.jpg?size=626&ext=jpg&ga=GA1.1.1546980028.1703721600&semt=sph"}),(0,f.jsxs)("div",{className:i,children:[(0,f.jsx)("div",{children:(0,f.jsx)("img",{src:t.profile.photos.large||u,className:n})}),(0,f.jsx)("div",{children:t.isOwner&&(0,f.jsx)("input",{type:"file",onChange:l})}),null===t.profile.fullName?"Name":t.profile.fullName,(0,f.jsx)("div",{children:(0,f.jsx)(b,{status:t.status,updateStatusTC:t.updateStatusTC})}),s?(0,f.jsx)(_,{initialValues:t.profile,profile:t.profile,onSubmit:r,isOwner:t.isOwner,setEditMode:e}):(0,f.jsx)(C,{profile:t.profile,isOwner:t.isOwner,setEditMode:e})]})]}):(0,f.jsx)(d.Z,{})},P={content:"MyPosts_content__2T5Mh",item:"MyPosts_item__flEDv"},M="Post_item__9DbPL",T=t=>(0,f.jsxs)("div",{className:M,children:[(0,f.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQg8gaNRMVq9hltpqT_lMVJ7AfWUaUMXl_Yig&usqp=CAU",alt:""}),(0,f.jsx)("span",{children:t.message}),(0,f.jsxs)("p",{children:[t.likeCount," LIKES"]})]});var I=e(8155);const N=o.memo((0,h.Z)({form:"postForm"})((t=>(0,f.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,f.jsx)("div",{children:(0,f.jsx)(p.Z,{component:g.Kx,name:"postText",validate:[I.C1,(0,I.DT)(120)]})}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{children:"Add post"})})]})))),y=t=>{let s=[...t.state.postData].reverse().map((t=>(0,f.jsx)(T,{message:t.message,likeCount:t.likeCount},t.id)));return(0,f.jsxs)("div",{className:P.content,children:[(0,f.jsx)("div",{children:(0,f.jsx)("h3",{children:"My posts"})}),(0,f.jsx)(N,{onSubmit:s=>{t.addPost(s.postText)}}),(0,f.jsx)("div",{className:P.posts,children:s})]})};const A=(0,j.$j)((t=>({state:t.profilePage})),(t=>({addPost:s=>{t((0,v.Wl)(s))}})))(y),D=t=>(0,f.jsxs)("div",{className:r,children:[(0,f.jsx)(S,{isOwner:t.isOwner,profile:t.profile,savePhoto:t.savePhoto,saveProfile:t.saveProfile,status:t.status,updateStatusTC:t.updateStatusTC}),(0,f.jsx)(A,{})]});var O=e(7689),w=e(1548),F=e(1154);class Z extends o.Component{refreshProfile(){let t=this.props.router.params.userId;t||(t=this.props.id,t||this.props.history.push("/login")),this.props.getUserProfileTC(t),this.props.onSetStatusTC(t)}componentDidMount(){this.refreshProfile()}componentDidUpdate(t,s){this.props.router.params.userId!=t.router.params.userId&&this.refreshProfile()}render(){return(0,f.jsx)(D,{...this.props,isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatusTC:this.props.updateStatusTC})}}const E=(0,F.qC)((0,j.$j)((t=>({profile:t.profilePage.profile,status:t.profilePage.statusText,id:t.auth.id,isAuth:t.auth.isAuth})),{getUserProfileTC:v.d$,onSetStatusTC:v.qB,updateStatusTC:v.OG,savePhoto:v.Ju,saveProfile:v.Ii}),(function(t){return function(s){let e=(0,O.TH)(),o=(0,O.s0)(),r=(0,O.UO)();return(0,f.jsx)(t,{...s,router:{location:e,navigate:o,params:r}})}}),w.D)(Z)},975:(t,s,e)=>{e.d(s,{II:()=>a,Kx:()=>n,ck:()=>l});e(2791);var o=e(2233),r=e(6139),i=e(184);const n=t=>{let{input:s,meta:e,...r}=t;const n=e.touched&&e.error;return(0,i.jsxs)("div",{className:o.Z.form\u0421ontrol+" "+(n&&o.Z.error),children:[(0,i.jsx)("div",{children:(0,i.jsx)("textarea",{...s,...r})}),n&&(0,i.jsx)("span",{children:e.error})]})},a=t=>{let{input:s,meta:e,...r}=t;const n=e.touched&&e.error;return(0,i.jsxs)("div",{className:o.Z.form\u0421ontrol+" "+(n&&o.Z.error),children:[(0,i.jsx)("div",{children:(0,i.jsx)("input",{...s,...r})}),n&&(0,i.jsx)("span",{children:e.error})]})},l=function(t,s,e,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,i.jsxs)("div",{children:[(0,i.jsx)(r.Z,{name:t,placeholder:s,component:e,validate:o,...n}),a]})}},8155:(t,s,e)=>{e.d(s,{C1:()=>o,DT:()=>r,oQ:()=>i});const o=t=>{if(!t)return"Field is required"},r=t=>s=>{if(s&&s.length>t)return"Max symbol ".concat(t)},i=t=>s=>{if(s&&s.length<t)return"Min symbol ".concat(t)}},2233:(t,s,e)=>{e.d(s,{Z:()=>o});const o={formControl:"formsControl_formControl__8tjrF","form\u0421ontrol":"formsControl_form\u0421ontrol__HovIe",error:"formsControl_error__aNckz",formErrorDiv:"formsControl_formErrorDiv__V0-P4"}}}]);
//# sourceMappingURL=786.ae66eb5b.chunk.js.map